/*
  Murphy's Laws - Global Stylesheet (site.css)
  ------------------------------------------------------------------
  Purpose: A single, framework-free stylesheet for the site.
  Structure:
  - Variables
  - Base
  - Utilities
  - Header
  - Components (cards, buttons, inputs)
  - Typography helpers
  - Footer

  Notes:
  - Keep generic utilities and shared components here.
  - If the stylesheet grows large, we can split by feature and import via Vite.
*/

/* ==========================
   Variables
   ========================== */
:root {
  --bg: #fff;
  --fg: #111827;
  --muted-fg: #6b7280;
  --primary: #030213;
  --border: rgb(0 0 0 / 10%);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0b11;           /* near-black page background */
    --fg: #e9eaee;           /* slightly softer than pure white */
    --muted-fg: #b3b7c4;     /* brighter muted text for readability */
    --border: rgb(255 255 255 / 18%); /* more visible borders */
  }

  /* Global link color for contrast on dark */
  a { color: #9ecbff; }
  a:visited { color: #b8a6ff; }
  a:hover, a:focus-visible { color: #cfe5ff; }

  /* Elevations look muddy on very dark backgrounds if mixed with white too much.
     Give key surfaces a subtle lift and improve focus states in dark mode. */
  header.sticky {
    background: color-mix(in oklab, var(--bg) 86%, transparent);
    border-bottom-color: var(--border);
  }

  .card {
    /* slightly lighter than the page background to stand out */
    background: color-mix(in oklab, var(--bg) 88%, white 12%);
    border-color: var(--border);
    box-shadow: 0 1px 0 rgb(255 255 255 / 6%) inset, 0 8px 24px rgb(0 0 0 / 40%);
  }

  .footer {
    background: color-mix(in oklab, var(--bg) 90%, white 10%);
    border-top-color: var(--border);
  }

  .btn, button {
    /* keep buttons legible on dark backgrounds */
    background: var(--primary);
    color: #fff;
    border-color: var(--primary);
  }

  .btn.outline, button.outline {
    background: color-mix(in oklab, var(--bg) 86%, white 14%);
    color: var(--fg);
    border-color: rgb(255 255 255 / 22%);
  }

  .btn.outline:hover, button.outline:hover,
  .btn.outline:focus-visible, button.outline:focus-visible {
    background: color-mix(in oklab, var(--bg) 80%, white 20%);
    border-color: rgb(255 255 255 / 32%);
  }

  input[type='text'] {
    background: color-mix(in oklab, var(--bg) 88%, white 12%);
    color: var(--fg);
    border-color: var(--border);
  }

  /* Improve tooltip contrast */
  .has-legend[data-legend]:hover::after,
  .has-legend[data-legend]:focus-within::after {
    background: #0f1115;
    color: #e9eaee;
    border: 1px solid var(--border);
  }

  /* Calculator semantic states tuned for dark mode */
  .calc-ok {
    background: #103424;   /* deep green */
    color: #c9f1dd;
  }

  .calc-warn {
    background: #3b2f07;   /* deep amber */
    color: #ffe29a;
  }

  .calc-orange {
    background: #402214;   /* deep orange */
    color: #ffd9bf;
  }

  .calc-danger {
    background: #3c151d;   /* deep red */
    color: #ffc4cc;
  }

  .calc-dark {
    background: #2a1b1b;
    color: #f0d6d6;
  }
}

/* ==========================
   Base
   ========================== */
html, body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
}

/* ==========================
   Utilities
   ========================== */

/* Utility classes needed by the app layout */
.container {
  max-width: 72rem;
  margin: 0 auto;
  padding: 0 1rem;
}

.hidden {
  display: none;
}

.text-center {
  text-align: center;
}
.mt-16 { margin-top: 4rem; }
.mt-8 { margin-top: 2rem; }
.mb-12 { margin-bottom: 3rem; }
.mb-8 { margin-bottom: 2rem; }
.mb-6 { margin-bottom: 1.5rem; }
.mb-4 { margin-bottom: 1rem; }
.gap-2 { gap: .5rem; }
.gap-4 { gap: 1rem; }
.grid { display: grid; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-1 { flex: 1 1 auto; }
.min-h-screen { min-height: 100vh; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.rounded { border-radius: .5rem; }
.border { border: 1px solid var(--border); }
.border-t { border-top: 1px solid var(--border); }
.p-2 { padding: .5rem; }
.p-4 { padding: 1rem; }
.p-8 { padding: 2rem; }
.pt-8 { padding-top: 2rem; }
.h-16 { height: 4rem; }
.cursor-pointer { cursor: pointer; }

.text-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.w-6 {
  width: 1.5rem;
  display: inline-block;
}

/* Common page wrappers */
.page { padding: 2rem 1rem; }

.section-grid {
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 2rem;
}

/* ==========================
   Header
   ========================== */

/* Header */
header.sticky {
  position: sticky;
  top: 0;
  backdrop-filter: blur(6px);
  background: color-mix(in oklab, var(--bg) 92%, transparent);
  z-index: 50;
  border-bottom: 1px solid var(--border);
}

.brand {
  display: flex;
  align-items: center;
  gap: .5rem;
  cursor: pointer;
  text-decoration: none;
  color: var(--fg);
}

.brand:hover, .brand:focus-visible {
  text-decoration: none;
}

.brand-badge {
  width: 2rem;
  height: 2rem;
  background: var(--primary);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: .375rem;
  font-weight: 700;
}

.brand-name {
  font-size: 1.125rem;
  line-height: 1;
}

.brand-name:hover {
  text-decoration: underline;
  text-underline-offset: .2rem;
}

.search-form {
  max-width: 28rem;
  margin: 0 1rem;
}

.btn, button {
  background: var(--primary);
  color: #fff;
  border: 1px solid var(--primary);
  border-radius: .5rem;
  padding: .5rem .875rem;
  cursor: pointer;
  text-decoration: none;
  display: inline-block;
}

.btn.outline, button.outline {
  background: transparent;
  color: var(--fg);
  border-color: var(--border);
}

button.link {
  background: none;
  border: none;
  color: var(--primary);
  padding: 0;
}

input[type='text'] {
  border: 1px solid var(--border);
  border-radius: .5rem;
  padding: .5rem .75rem;
  width: 100%;
}

/* ==========================
   Components
   ========================== */

/* Cards */
.card {
  border: 1px solid var(--border);
  border-radius: .75rem;
  background: color-mix(in oklab, var(--bg) 96%, white 4%);
}

.card .card-content {
  padding: 1.25rem;
}

.card-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: 1.25rem;
}

.thick-border {
  border-width: 2px;
}

/* ==========================
   Typography helpers
   ========================== */

/* Typography helpers */
.gradient-title {
  font-size: 2.5rem;
  margin: 0 0 1rem;
  background: linear-gradient(90deg, var(--primary), #4b5563);
  color: transparent;
  background-clip: text;
}

.subhead {
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0;
}

.font-semibold {
  font-weight: 600;
}

.blockquote {
  font-size: 1.25rem;
  font-style: italic;
  border-left: 4px solid var(--primary);
  padding-left: 1rem;
  margin: .5rem 0 1rem;
}

/* ==========================
   Footer
   ========================== */

/* Footer */
.footer {
  background: color-mix(in oklab, var(--bg) 92%, white 8%);
  padding: 3rem 0;
  margin-top: 4rem;
  border-top: 1px solid var(--border);
}

/* Ensure footer links are visible in dark mode and have good contrast */
.footer button.link {
  color: var(--fg);
}

.footer .grid {
  padding: 0 2rem;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 2rem;
}

@media (width >= 768px) {
  .footer .grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

.small {
  font-size: .875rem;
  color: var(--muted-fg);
}

.rank {
  width: 1.5rem;
  color: var(--primary);
  font-weight: 700;
  display: inline-block;
}

.law-meta {
  display: flex;
  gap: 1rem;
}

/* Pagination */
.pagination {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  justify-content: center;
  margin-top: 1rem;
}

.pagination .ellipsis {
  display: inline-flex;
  align-items: center;
  padding: 0 .5rem;
  color: var(--muted-fg);
}

.pagination .btn[aria-current='page'] {
  pointer-events: none;
}

.pagination .btn.disabled,
.pagination .btn[aria-disabled='true'] {
  opacity: .5;
  pointer-events: none;
}

/* ==========================
   Sod's Law Calculator (scoped styles)
   ========================== */
.calc-container {
  background: color-mix(in oklab, var(--bg) 98%, white 2%);
}

.calc-input-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

@media (width >= 600px) {
  .calc-input-grid { grid-template-columns: 1fr 1fr; }
}

.calc-slider-group { text-align: left; }

.calc-slider-group label {
  display: block;
  font-weight: 600;
  margin-bottom: .5rem;
}

.calc-slider-group input[type='range'] {
  width: 100%;
  appearance: none;
  height: 8px;
  background: #e4e6eb;
  border-radius: 5px;
  outline: none;
  cursor: pointer;
}

.calc-slider-group input[type='range']::-webkit-slider-thumb {
  appearance: none;
  width: 20px;
  height: 20px;
  background: var(--primary);
  border-radius: 50%;
}

.calc-slider-group input[type='range']::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
}

.calc-slider-value {
  font-weight: 700;
  color: var(--primary);
  margin-left: .5rem;
}

.calc-result-section {
  margin-top: 1.5rem;
  padding: 1rem;
  border-radius: .5rem;
  background: color-mix(in oklab, var(--bg) 96%, white 4%);
  border: 1px solid var(--border);
}

.calc-result-display {
  padding: 1rem;
  border-radius: .5rem;
  transition: background-color .3s ease, color .3s ease;
}

.calc-score {
  font-size: 3rem;
  font-weight: 800;
  display: block;
}

.calc-info {
  font-size: .9rem;
  color: var(--muted-fg);
  margin-top: 1rem;
}

/* Bigger typeset for MathJax formula on calculator page */
.formula { margin: .5rem 0 1rem; }

.formula mjx-container {
  font-size: 240% !important;
  line-height: 2.4;
}

/* Tooltip for formula legend */
.has-legend[data-legend] { position: relative; }

.has-legend[data-legend]:hover::after, .has-legend[data-legend]:focus-within::after {
  content: attr(data-legend);
  position: absolute;
  top: 100%;
  left: 0;
  white-space: pre-wrap;
  background: #111;
  color: #fff;
  padding: .5rem .75rem;
  border-radius: .375rem;
  z-index: 10;
  margin-top: .25rem;
  max-width: 32rem;
}

/* Semantic result states */
.calc-ok {
  background: #e7f5ee;
  color: #0b3d22;
}

.calc-warn {
  background: #fff8e1;
  color: #5a4300;
}

.calc-orange {
  background: #ffe9d6;
  color: #6a2e00;
}

.calc-danger {
  background: #ffe3e6;
  color: #5e0010;
}

.calc-dark {
  background: #f0d6d6;
  color: #2b0000;
}
