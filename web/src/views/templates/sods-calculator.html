<div class="card">
  <div class="card-content">
    <header>
      <h1 class="m-0"><span class="accent-text">Sod's</span> Law Calculator</h1>
      <p class="calc-description">Estimate the (P)robability of a task going wrong by balancing (U)rgency, (C)omplexity, and (I)mportance against your (S)kill and the (F)requency of the work, multiplied by the Murphy-approved (A)ctivity constant.</p>
      <p class="formula" id="formula-display"></p>
    </header>
    <div class="calc-input-grid">
      <div class="calc-slider-group">
        <label for="urgency">U (Urgency of the task): <span class="calc-slider-value" id="urgency-value">5</span></label>
        <input type="range" id="urgency" min="1" max="9" value="5">
      </div>
      <div class="calc-slider-group">
        <label for="complexity">C (Complexity of the task): <span class="calc-slider-value" id="complexity-value">5</span></label>
        <input type="range" id="complexity" min="1" max="9" value="5">
      </div>
      <div class="calc-slider-group">
        <label for="importance">I (Importance of the task): <span class="calc-slider-value" id="importance-value">5</span></label>
        <input type="range" id="importance" min="1" max="9" value="5">
      </div>
      <div class="calc-slider-group">
        <label for="skill">S (Your skill in performing the task): <span class="calc-slider-value" id="skill-value">5</span></label>
        <input type="range" id="skill" min="1" max="9" value="5">
      </div>
      <div class="calc-slider-group">
        <label for="frequency">F (Frequency of the task): <span class="calc-slider-value" id="frequency-value">5</span></label>
        <input type="range" id="frequency" min="1" max="9" value="5">
      </div>
      <div class="calc-slider-group">
        <p class="label-without-input">A (Aggravation factor, a constant set by researchers): <span class="calc-slider-value" id="a-value">0.7</span></p>
      </div>
    </div>
    <h2>P (Probability of things going wrong):</h2>
    <div id="result-display" class="calc-result-display calc-ok">
      <span id="score-value" class="calc-score">0.00</span>
      <p id="score-interpretation" class="calc-interpretation">Slide the controls to reveal the likelihood of chaos.</p>
    </div>

    <section class="section section-card mt-8 mb-8">
      <div class="section-header">
        <h3 class="section-title"><span class="accent-text">Share</span> Your Results</h3>
      </div>
      <div class="section-body">
        <div class="quick-share-actions">
          <button type="button" id="copy-link" class="btn">
            <span class="icon" data-icon="link" aria-hidden="true"></span>
            <span class="btn-text">Copy Link</span>
          </button>
          <button type="button" id="share-twitter" class="btn share-btn-twitter">
            <span class="icon" data-icon="twitter" aria-hidden="true"></span>
            <span class="btn-text">Twitter</span>
          </button>
          <button type="button" id="share-facebook" class="btn share-btn-facebook">
            <span class="icon" data-icon="facebook" aria-hidden="true"></span>
            <span class="btn-text">Facebook</span>
          </button>
          <button type="button" id="share-cta" class="btn outline">
            <span class="icon" data-icon="email" aria-hidden="true"></span>
            <span class="btn-text">Send Email</span>
          </button>
        </div>
        <div id="copy-feedback" class="copy-feedback hidden" aria-live="polite"></div>
        <div id="share-form-container" class="share-form-container hidden">
          <h2 class="mt-0"><span class="accent-text">Share</span> Your Calculation</h2>
          <div class="form-group">
            <label for="task-description" class="form-label">Task Description <span class="required custom-tooltip" data-title="required" role="img" aria-label="required">*</span></label>
            <textarea id="task-description" rows="3" class="form-control" placeholder="Describe the task you calculated..." required></textarea>
          </div>
          <div class="form-group">
            <label for="sender-name" class="form-label">Your Name <span class="required custom-tooltip" data-title="required" role="img" aria-label="required">*</span></label>
            <input type="text" id="sender-name" class="form-control" placeholder="John Doe" required>
          </div>
          <div class="form-group">
            <label for="sender-email" class="form-label">Your Email <span class="required custom-tooltip" data-title="required" role="img" aria-label="required">*</span></label>
            <input type="email" id="sender-email" class="form-control" placeholder="your.email@example.com" required>
          </div>
          <div class="form-group">
            <label for="recipient-name" class="form-label">Recipient Name <span class="required custom-tooltip" data-title="required" role="img" aria-label="required">*</span></label>
            <input type="text" id="recipient-name" class="form-control" placeholder="Jane Smith" required>
          </div>
          <div class="form-group">
            <label for="recipient-email" class="form-label">Recipient Email <span class="required custom-tooltip" data-title="required" role="img" aria-label="required">*</span></label>
            <input type="email" id="recipient-email" class="form-control" placeholder="recipient.email@example.com" required>
          </div>
          <div class="form-actions">
            <button type="button" id="cancel-share" class="btn">
              <span class="btn-text">Cancel</span>
              <span class="icon" data-icon="close" aria-hidden="true"></span>
            </button>
            <button type="button" id="preview-email" class="btn">
              <span class="btn-text">Preview Email</span>
              <span class="icon" data-icon="preview" aria-hidden="true"></span>
            </button>
            <button type="button" id="send-email" class="btn">
              <span class="btn-text">Send Email</span>
              <span class="icon" data-icon="email" aria-hidden="true"></span>
            </button>
          </div>
          <div id="share-status" class="share-status hidden"></div>
        </div>
        <div id="email-preview-modal" class="modal hidden">
          <div class="modal-content">
            <div class="modal-header">
              <h3>Email Preview</h3>
              <button type="button" id="close-preview" class="close-button" aria-label="Close preview">
                <span class="icon" data-icon="close" aria-hidden="true"></span>
              </button>
            </div>
            <div class="modal-body" id="preview-content"></div>
            <div class="modal-footer">
              <button type="button" id="close-preview-footer" class="btn">
                <span class="btn-text">Close</span>
                <span class="icon" data-icon="close" aria-hidden="true"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="calc-info calc-faq">
      <h2 class="calc-info-title"><span class="accent-text">Murphy's</span> Playbook</h2>
      <ul class="calc-info-list">
        <li><strong>Scale:</strong> Probabilities range from 0.12 (barely cursed) to 8.6 (catastrophic).</li>
        <li><strong>Pressure builds:</strong> Higher Urgency, Complexity, and Importance push the score skyward.</li>
        <li><strong>Skill saves:</strong> Invest in Skill to tame the chaos.</li>
        <li><strong>Beware repetition:</strong> Frequent tasks (Frequency) tempt fate thanks to the sinuous 1/(1 - sin(F/10)) term.</li>
      </ul>
      <h3 class="calc-info-subtitle"><span class="accent-text">How</span> to cheat Murphy</h3>
      <ul class="calc-info-list">
        <li>Cut Urgency by asking does everything really need to ship today?</li>
        <li>Break huge projects into bite size work to cut Complexity.</li>
        <li>Importance is a matter of perspective - is this task truly critical?</li>
        <li>Sharpen your Skill so mistakes bounce off.</li>
        <li>Batch low stakes tasks to shrink Frequency.</li>
      </ul>
      <p class="calc-info-summary">Use the calculator to model best and worst case scenarios before reality makes the decision for you.</p>
    </section>
  </div>
</div>
